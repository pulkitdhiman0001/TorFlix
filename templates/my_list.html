{% extends 'skel.html' %}
{% block content %}
{%- for category, message in get_flashed_messages(with_categories = true) %}
{%if category== 'error'%}
<div class="alert alert-danger alert-dismissible fade show text-white" role="alert" id="alert_danger">

    <strong>{{message}}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% else %}
<div class="alert bg-info alert-dismissible fade show text-dark" role="alert" id="alert_success">

    <strong>{{message}}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}
{% endfor %}
<div class="text-white page-title">
    <h5>{{ title }}</h5>
</div>
<p style="color:white;padding:20px 0px 0px 0px" class="text-center">
    Kindly remember to delete the torrent after viewing,
    as this ensures
    sufficient free storage availability and enables you to enjoy more movies and TV shows without interruptions.
    Your cooperation is appreciated.
</p>
<div class="content mt-5">
    {% for movie in movie_list %}
    {% if not movie['no_of_files'] > 1 %}
    <div class="movie-cards" style="color:white" data-bs-toggle="modal"
         data-bs-target="#torrentListForOneFile{{ movie['torrentId'] }}"
         onclick="checkifexists(torrent_id={{movie['torrentId']}}, magnet_link='{{movie['magnetLink']}}')">
        {% if movie['thumbnail'] == None %}
        <div class="card-image" style="background-image: url('{{ movie['images'][0] }}');background-size:contain"
             title="{{ movie['name'] }}">
            <div class="head" style="display: flex;
                                    align-items:center;
                                    justify-content:space-around;
                                    height:30px;
                                    background-color:#106079">
                <div class="seeders" style="display: flex; align-items:center">
                    <div>
                        <img src="{{ url_for('static', filename='images/seeders.png') }}" height="15px" alt="Seeders"
                             style="filter:invert(1)" srcset="">
                    </div>
                    <div style="font-size:13px; margin-left:4px">{{ movie["seeders"] }}</div>
                </div>
                <div class="size" style="display: flex; align-items:center">
                    <div>
                        <img src="{{ url_for('static', filename='images/size.png') }}" height="15px" alt="Seeders"
                             style="filter:invert(1)" srcset="">
                    </div>
                    <div style="font-size:13px; margin-left:4px">{{ movie["size"] }}</div>
                </div>
            </div>
            <div class="card-bottom">{{ movie["name"] }}</div>
        </div>
        {% else %}
        <div class="card-image" style="background-image: url('{{ movie['thumbnail'] }}')" title="{{ movie['name'] }}">
            <div class="head" style="display: flex;
                                    align-items:center;
                                    justify-content:space-around;
                                    height:30px;
                                    background-color:#106079">
                <div class="seeders" style="display: flex; align-items:center">
                    <div>
                        <img src="{{ url_for('static', filename='images/seeders.png') }}" height="15px" alt="Seeders"
                             style="filter:invert(1)" srcset="">
                    </div>
                    <div style="font-size:13px; margin-left:4px">{{ movie["seeders"] }}</div>
                </div>
                <div class="size" style="display: flex; align-items:center">
                    <div>
                        <img src="{{ url_for('static', filename='images/size.png') }}" height="15px" alt="Seeders"
                             style="filter:invert(1)" srcset="">
                    </div>
                    <div style="font-size:13px; margin-left:4px">{{ movie["size"] }}</div>
                </div>
            </div>
            <div class="card-bottom">{{ movie["name"] }}</div>
        </div>
        {% endif %}
        {% if movie['conversion_flag'] == true %}
        <div class="bg-danger converted-mark">
            <h5 class="converted-text">converted</h5>
        </div>
        {% endif %}
    </div>


    <!-- Modal -->
    <div class="modal fade" id="torrentListForOneFile{{ movie['torrentId'] }}" tabindex="-1"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content" style="border: 2px solid #0d6b80;
                                background:black">
                <div class="modal-header text-white" style="background:#031923;">
                    <h4 class="modal-title">{{ movie["name"] }}</h4>
                    <button type="button" class="btn-close bg-light" data-bs-dismiss="modal">

                    </button>
                </div>
                <div class="modal-body">
                    <div id="carouselmylist{{ movie['torrentId'] }}" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{{ movie['images'][0] }}"
                                     onerror="this.onerror=null; this.src='{{url_for('static', filename='images/altimage.png')}}'"
                                     height="15px" class="d-block w-100" alt="Slide 1">
                            </div>
                            {% if movie['images'] %}
                            {% for ss in movie['images'] %}
                            <div class="carousel-item">
                                <img src="{{ ss }}"
                                     onerror="this.onerror=null; this.src='{{url_for('static', filename='images/altimage.png')}}'"
                                     class="d-block w-100" alt="Slide 2">
                            </div>
                            {% endfor %}
                            {% endif %}
                        </div>
                        <a class="carousel-control-prev" href="#carouselmylist{{ movie['torrentId'] }}" role="button" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselmylist{{ movie['torrentId'] }}" role="button" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <!-- End of Carousel -->
                    <div class="container torrent-model-name-title">
                        <h5>{{movie['name']}}</h5>
                    </div>
                    <!-- Table Section -->
                    <table style="border-radius:20px">
                        <tr>
                            <th>Size</th>
                            <th>Seeders</th>
                            <th>Leechers</th>
                        </tr>
                        <tr>
                            <td>{{ movie["size"] }}</td>
                            <td>{{ movie["seeders"] }}</td>
                            <td>{{ movie["leechers"] }}</td>
                        </tr>
                    </table>
                    <!-- Table Section -->
                    <table class="" style="border-radius:20px">
                        <tr>
                            <td>Category</td>
                            <td>{{ movie["category"] }}</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>{{ movie["type"] }}</td>
                        </tr>
                        <tr>
                            <td>Genre</td>
                            <td>
                                {% if movie['genre'] %}
                                {% for genre in movie['genre'] %}{{ genre }},{% endfor %}
                                {% else %}
                                {{ movie["genre"] }}
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>Language</td>
                            <td>{{ movie["language"] }}</td>
                        </tr>
                    </table>

                    {% if not movie['description'] == None %}
                    <!-- Accordion Section -->
                    <div id="accordionmylist{{movie['torrentId']}}" class="mt-4">
                        <div class="card text-white" style="background:#031923; color: white">
                            <div class="card">
                                <div class="card-header" id="headingTwo" style="border-bottom:1px solid cyan">
                                    <h5 class="mb-0">
                                        <button class="btn btn-link collapsed" data-bs-toggle="collapse"
                                                data-bs-target="#collapse{{movie['torrentId']}}" aria-expanded="false"
                                                aria-controls="collapseTwo">Description
                                        </button>
                                        <button class="btn btn-link close-accordion" data-bs-toggle="collapse"
                                                data-target="#collapse{{movie['torrentId']}}" aria-expanded="false"

                                                style="position: absolute;
                                                               top: 5px;
                                                               right: 15px;
                                                               color: white">
                                            <i class="fas fa-times-circle"></i>
                                            <!-- You can use any icon for the close button -->
                                        </button>
                                    </h5>
                                </div>
                                <div id="collapse{{movie['torrentId']}}" class="collapse"
                                     data-bs-parent="#accordionmylist{{movie['torrentId']}}">
                                    <div class="card-body">{{ movie["description"] }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
                <div class="modal-footer">
                    <div class="btn-toolbar w-100 d-flex" role="group">
                        <div class="btn-group d-flex w-100 mb-2" role="group">
                            <button type="button" class="btn btn-danger flex-fill"
                                    id="checkingmylist{{movie['torrentId']}}">Fetching Data
                                <svg class="ms-2" style="position:absolute;filter:invert(1)" width="24" height="24"
                                     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <style>
                                        .spinner_0XTQ{transform-origin:center;animation:spinner_y6GP .75s linear infinite}@keyframes spinner_y6GP{100%{transform:rotate(360deg)}}
                                    </style>
                                    <path class="spinner_0XTQ"
                                          d="M12,23a9.63,9.63,0,0,1-8-9.5,9.51,9.51,0,0,1,6.79-9.1A1.66,1.66,0,0,0,12,2.81h0a1.67,1.67,0,0,0-1.94-1.64A11,11,0,0,0,12,23Z"/>
                                </svg>
                            </button>
                            <span class="download_progress"
                                  style="background-image: url(https://media.giphy.com/media/U3qYN8S0j3bpK/giphy.gif)"
                                  id="download_progressmylist{{movie['torrentId']}}"></span>
                            <button type="button"
                                    style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; border:none"
                                    class="btn btn-success flex-fill"
                                    id="download_btn_divmylist{{movie['torrentId']}}"
                                    onclick="location.href='{{url_for('download_torrents', magnet_link = movie['magnetLink'], torrent_id = movie['torrentId'], torrent_category = movie['category'])}}'">
                                            <span id="download_btnmylist{{movie['torrentId']}}"
                                                  style="z-index: 2; position: relative;">Download
                                            </span>
                            </button>

                            {% for file in movie['files'] %}
                            <button type="button" class="btn btn-primary flex-fill"
                                    id="watch_btnmylist{{movie['torrentId']}}"
                                    onclick="location.href='{{ url_for('watch_download_torrents', torrent_id = movie['torrentId'], file_id=file.id) }}'">
                                Watch
                            </button>
                            {% endfor %}
                        </div>
                        {% for file in movie['files'] %}
                        <div class="btn-group operations-group" role="group"
                             id="operations{{ movie['torrentId'] }}">
                            <button type="button" id="convertmylist{{ movie['torrentId'] }}"
                                    onclick="location.href='{{url_for('convert_video', torrent_id = movie['torrentId'], file_id = file.id )}}'; get_conversion_status(torrent_id = {{movie['torrentId'] }});"
                                    class="btn btn-success flex-fill me-2">
                                <i id="converticonmylist{{movie['torrentId']}}" class="fa fa-repeat" aria-hidden="true"></i>
                                <svg id="convertspinnermylist{{movie['torrentId']}}" class="ms-2" style="filter:invert(1)" width="24" height="24"
                                     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <style>
                                        .spinner_0XTQ{transform-origin:center;animation:spinner_y6GP .75s linear infinite}@keyframes spinner_y6GP{100%{transform:rotate(360deg)}}
                                    </style>
                                    <path class="spinner_0XTQ"
                                          d="M12,23a9.63,9.63,0,0,1-8-9.5,9.51,9.51,0,0,1,6.79-9.1A1.66,1.66,0,0,0,12,2.81h0a1.67,1.67,0,0,0-1.94-1.64A11,11,0,0,0,12,23Z"/>
                                </svg>

                            </button>
                            <button type="button"
                                    onclick="location.href='{{ url_for('download_torrent_to_client_device', torrent_id= movie['torrentId'] ) }}'"
                                    id="downloadmylist{{ movie['torrentId'] }}" class="btn btn-warning flex-fill me-2">
                                <i
                                        class="fa fa-download me-2" aria-hidden="true"></i>
                                <i class="fa me-2" aria-hidden="true">&#xf10b;</i>
                                <i class="fa fa-desktop" aria-hidden="true"></i>
                            </button>
                            {% if get_user_identity.id == movie["user_id"] %}
                            <button type="button" id="delete_btnmylist{{ movie['torrentId'] }}"
                                    class="btn btn-danger flex-fill"
                                    onclick="location.href='{{ url_for('delete_watched_torrent', torrent_id = movie['torrentId'], torrent_category = movie['category']) }}'">
                                <i class="fa fa-trash" aria-hidden="true"></i>
                            </button>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% else %}
    <div class="movie-cards" style="color:white"
         data-bs-target="#exampleModalToggle{{movie['torrentId']}}" data-bs-toggle="modal" role="button" onclick="checkifexists(torrent_id={{movie['torrentId']}}, magnet_link='{{movie['magnetLink']}}')">
        {% if movie['thumbnail'] == None %}
        <div class="card-image" style="background-image: url('{{ movie['images'][0] }}');background-size:contain"
             title="{{ movie['name'] }}">
            <div class="head" style="display: flex;
                                    align-items:center;
                                    justify-content:space-around;
                                    height:30px;
                                    background-color:#106079">
                <div class="seeders" style="display: flex; align-items:center">
                    <div>
                        <img src="{{ url_for('static', filename='images/seeders.png') }}" height="15px" alt="Seeders"
                             style="filter:invert(1)" srcset="">
                    </div>
                    <div style="font-size:13px; margin-left:4px">{{ movie["seeders"] }}</div>
                </div>
                <div class="size" style="display: flex; align-items:center">
                    <div>
                        <img src="{{ url_for('static', filename='images/size.png') }}" height="15px" alt="Seeders"
                             style="filter:invert(1)" srcset="">
                    </div>
                    <div style="font-size:13px; margin-left:4px">{{ movie["size"] }}</div>
                </div>
            </div>
            <div class="card-bottom">{{ movie["name"] }}</div>
        </div>
        {% else %}
        <div class="card-image" style="background-image: url('{{ movie['thumbnail'] }}')" title="{{ movie['name'] }}">
            <div class="head" style="display: flex;
                                    align-items:center;
                                    justify-content:space-around;
                                    height:30px;
                                    background-color:#106079">
                <div class="seeders" style="display: flex; align-items:center">
                    <div>
                        <img src="{{ url_for('static', filename='images/seeders.png') }}" height="15px" alt="Seeders"
                             style="filter:invert(1)" srcset="">
                    </div>
                    <div style="font-size:13px; margin-left:4px">{{ movie["seeders"] }}</div>
                </div>
                <div class="size" style="display: flex; align-items:center">
                    <div>
                        <img src="{{ url_for('static', filename='images/size.png') }}" height="15px" alt="Seeders"
                             style="filter:invert(1)" srcset="">
                    </div>
                    <div style="font-size:13px; margin-left:4px">{{ movie["size"] }}</div>
                </div>
            </div>
            <div class="card-bottom">{{ movie["name"] }}</div>
        </div>
        {% endif %}
        {% if movie['conversion_flag'] == true %}
        <div class="bg-danger converted-mark">
            <h5 class="converted-text">converted</h5>
        </div>
        {% endif %}
    </div>
    <!-- Modal -->

    <div class="modal fade" id="exampleModalToggle{{movie['torrentId']}}" aria-hidden="true"
         aria-labelledby="exampleModalToggleLabel"
         tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content" style="border: 2px solid #0d6b80">
                <div class="modal-header text-white" style="background:#031923">
                    <h5 class="modal-title" id="exampleModalToggleLabel">{{movie['name']}}</h5>
                    <button type="button" class="btn-close bg-light" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                </div>
                <div class="modal-body" style="background:#000000ed !important">
                    <div class="content">

                        {% for file in movie['files'] %}

                        <div class="movie-cards" style="color:white" data-bs-target="#exampleModalToggle2{{file.id}}"
                             data-bs-toggle="modal">
                            {% if movie['thumbnail'] == None %}
                            <div class="card-image"
                                 style="background-image: url('{{ movie['images'][0] }}');background-size:contain"
                                 title="{{ movie['name'] }}">
                                <div class="head" style="display: flex;
                                    align-items:center;
                                    justify-content:space-around;
                                    height:30px;
                                    background-color:#106079">
                                    <div class="seeders" style="display: flex; align-items:center">
                                        <div>
                                            <img src="{{ url_for('static', filename='images/seeders.png') }}"
                                                 height="15px"
                                                 alt="Seeders" style="filter:invert(1)" srcset="">
                                        </div>
                                        <div style="font-size:13px; margin-left:4px">{{ movie["seeders"] }}</div>
                                    </div>
                                    <div class="size" style="display: flex; align-items:center">
                                        <div>
                                            <img src="{{ url_for('static', filename='images/size.png') }}" height="15px"
                                                 alt="Seeders" style="filter:invert(1)" srcset="">
                                        </div>
                                        <div style="font-size:13px; margin-left:4px">{{ movie["size"] }}</div>
                                    </div>
                                </div>
                                <div class="card-bottom">{{ file.file_path.split('/')[-1] }}</div>
                            </div>
                            {% else %}
                            <div class="card-image" style="background-image: url('{{ movie['thumbnail'] }}')"
                                 title="{{ movie['name'] }}">
                                <div class="head" style="display: flex;
                                    align-items:center;
                                    justify-content:space-around;
                                    height:30px;
                                    background-color:#106079">
                                    <div class="seeders" style="display: flex; align-items:center">
                                        <div>
                                            <img src="{{ url_for('static', filename='images/seeders.png') }}"
                                                 height="15px"
                                                 alt="Seeders" style="filter:invert(1)" srcset="">
                                        </div>
                                        <div style="font-size:13px; margin-left:4px">{{ movie["seeders"] }}</div>
                                    </div>
                                    <div class="size" style="display: flex; align-items:center">
                                        <div>
                                            <img src="{{ url_for('static', filename='images/size.png') }}" height="15px"
                                                 alt="Seeders" style="filter:invert(1)" srcset="">
                                        </div>
                                        <div style="font-size:13px; margin-left:4px">{{ movie["size"] }}</div>
                                    </div>
                                </div>
                                <div class="card-bottom">{{ movie["name"] }}</div>
                            </div>
                            {% endif %}
                        </div>


                        {% endfor %}
                    </div>
                </div>

                <div class="modal-footer" style="background:#031923">
                    <div class="btn-toolbar w-100 d-flex" role="group">
                        <div class="btn-group d-flex w-100 mb-2" role="group">
                            <button type="button" class="btn btn-danger flex-fill"
                                    id="checkingmylistformultiplefiles{{movie['torrentId']}}">Fetching Data
                                <svg class="ms-2" style="position:absolute;filter:invert(1)" width="24" height="24"
                                     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <style>
                                        .spinner_0XTQ{transform-origin:center;animation:spinner_y6GP .75s linear infinite}@keyframes spinner_y6GP{100%{transform:rotate(360deg)}}
                                    </style>
                                    <path class="spinner_0XTQ"
                                          d="M12,23a9.63,9.63,0,0,1-8-9.5,9.51,9.51,0,0,1,6.79-9.1A1.66,1.66,0,0,0,12,2.81h0a1.67,1.67,0,0,0-1.94-1.64A11,11,0,0,0,12,23Z"/>
                                </svg>
                            </button>
                            <span class="download_progress"
                                  style="background-image: url(https://media.giphy.com/media/U3qYN8S0j3bpK/giphy.gif)"
                                  id="download_progressmylistformultiplefiles{{movie['torrentId']}}"></span>
                            <button type="button"
                                    style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; border:none"
                                    class="btn btn-success flex-fill"
                                    id="download_btn_divmylistformultiplefiles{{movie['torrentId']}}"
                                    onclick="location.href='{{url_for('download_torrents', magnet_link = movie['magnetLink'], torrent_id = movie['torrentId'], torrent_category = movie['category'])}}'">
                                            <span id="download_btnmylistformultiplefiles{{movie['torrentId']}}"
                                                  style="z-index: 2; position: relative;">Download
                                            </span>
                            </button>

                        </div>

                        <div class="btn-group operations-group" role="group"
                             id="operationsmylistformultiplefiles{{ movie['torrentId'] }}">
                            <button type="button" id="convertmylistformultiplefiles{{ movie['torrentId'] }}"
                                    onclick="location.href='{{url_for('convert_video', torrent_id = movie['torrentId'] )}}'; get_conversion_status(torrent_id = {{movie['torrentId'] }});"
                                    class="btn btn-success flex-fill me-2">
                                <i id="converticonmylistformultiplefiles{{movie['torrentId']}}" class="fa fa-repeat" aria-hidden="true"></i>
                                <svg id="convertspinnermylistformultiplefiles{{movie['torrentId']}}" class="ms-2" style="filter:invert(1)" width="24" height="24"
                                     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <style>
                                        .spinner_0XTQ{transform-origin:center;animation:spinner_y6GP .75s linear infinite}@keyframes spinner_y6GP{100%{transform:rotate(360deg)}}
                                    </style>
                                    <path class="spinner_0XTQ"
                                          d="M12,23a9.63,9.63,0,0,1-8-9.5,9.51,9.51,0,0,1,6.79-9.1A1.66,1.66,0,0,0,12,2.81h0a1.67,1.67,0,0,0-1.94-1.64A11,11,0,0,0,12,23Z"/>
                                </svg>

                            </button>
                            <button type="button"
                                    onclick="location.href='{{ url_for('download_torrent_to_client_device', torrent_id= movie['torrentId'] ) }}'"
                                    id="downloadmylistformultiplefiles{{ movie['torrentId'] }}" class="btn btn-warning flex-fill me-2">
                                <i
                                        class="fa fa-download me-2" aria-hidden="true"></i>
                                <i class="fa me-2" aria-hidden="true">&#xf10b;</i>
                                <i class="fa fa-desktop" aria-hidden="true"></i>
                            </button>
                            {% if get_user_identity.id == movie["user_id"] %}
                            <button type="button" id="delete_btnmylistformultiplefiles{{ movie['torrentId'] }}"
                                    class="btn btn-danger flex-fill"
                                    onclick="location.href='{{ url_for('delete_watched_torrent', torrent_id = movie['torrentId'], torrent_category = movie['category']) }}'">
                                <i class="fa fa-trash" aria-hidden="true"></i>
                            </button>
                            {% endif %}
                        </div>

                    </div>
                </div>


            </div>
        </div>
    </div>
    {% for file in movie['files'] %}
    <div class="modal fade" id="exampleModalToggle2{{file.id}}" aria-hidden="true"
         aria-labelledby="exampleModalToggleLabel2"
         tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border: 2px solid #0d6b80">
                <div class="modal-header text-white" style="background:#031923">
                    <h5 class="modal-title" id="exampleModalToggleLabel2">{{ file.file_path.split('/')[-1] }}</h5>
                    <button type="button" class="btn-close bg-light" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                </div>
                <div class="modal-body" style="background:#000000ed !important">
                    <div id="carouselmylist{{file.id}}" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{{ movie['images'][0] }}"
                                     onerror="this.onerror=null; this.src='{{url_for('static', filename='images/altimage.png')}}'"
                                     height="15px" class="d-block w-100" alt="Slide 1">
                            </div>
                            {% if movie['images'] %}
                            {% for ss in movie['images'] %}
                            <div class="carousel-item">
                                <img src="{{ ss }}"
                                     onerror="this.onerror=null; this.src='{{url_for('static', filename='images/altimage.png')}}'"
                                     class="d-block w-100" alt="Slide 2">
                            </div>
                            {% endfor %}
                            {% endif %}
                        </div>
                        <a class="carousel-control-prev" href="#carouselExample{{file.id}}" role="button"
                           data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselmylist{{file.id}}" role="button"
                           data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <!-- End of Carousel -->
                    <!-- Table Section -->
                    <table style="border-radius:20px">
                        <tr>
                            <th>Size</th>
                            <th>Seeders</th>
                            <th>Leechers</th>
                        </tr>
                        <tr>
                            <td>{{ movie["size"] }}</td>
                            <td>{{ movie["seeders"] }}</td>
                            <td>{{ movie["leechers"] }}</td>
                        </tr>
                    </table>
                    <!-- Table Section -->
                    <table class="" style="border-radius:20px">
                        <tr>
                            <td>Category</td>
                            <td>{{ movie["category"] }}</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>{{ movie["type"] }}</td>
                        </tr>
                        <tr>
                            <td>Genre</td>
                            <td>
                                {% if movie['genre'] %}
                                {% for genre in movie['genre'] %}{{ genre }},{% endfor %}
                                {% else %}
                                {{ movie["genre"] }}
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>Language</td>
                            <td>{{ movie["language"] }}</td>
                        </tr>
                    </table>

                    {% if not movie['description'] == "None" %}
                    <!-- Accordion Section -->
                    <div id="accordion{{file.id}}" class="mt-4">
                        <div class="card text-white" style="background:#031923; color: white">
                            <div class="card">
                                <div class="card-header" id="headingTwo{{file.id}}"
                                     style="border-bottom:1px solid cyan">
                                    <h5 class="mb-0">
                                        <button class="btn btn-link collapsed" data-toggle="collapse"
                                                data-target="#collapseTwo{{file.id}}" aria-expanded="false"
                                                aria-controls="collapseTwo{{file.id}}">Description
                                        </button>
                                        <button class="btn btn-link close-accordion" data-toggle="collapse"
                                                data-target="#collapseTwo{{file.id}}" aria-expanded="false"
                                                aria-controls="collapseTwo"
                                                style="position: absolute;
                                                               top: 5px;
                                                               right: 15px;
                                                               color: white">
                                            <i class="fas fa-times-circle"></i>
                                            <!-- You can use any icon for the close button -->
                                        </button>
                                    </h5>
                                </div>
                                <div id="collapseTwo{{file.id}}" class="collapse"
                                     aria-labelledby="headingTwo{{file.id}}"
                                     data-parent="#accordion{{file.id}}">
                                    <div class="card-body">{{ movie["description"] }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>

                <div class="modal-footer" style="background:#031923">
                    <button class="btn btn-warning" data-bs-target="#exampleModalToggle{{movie['torrentId']}}"
                            data-bs-toggle="modal"
                            data-bs-dismiss="modal">Go Back
                    </button>
                    <button type="button" class="btn btn-primary flex-fill"
                            onclick="location.href='{{ url_for('watch_download_torrents', torrent_id = movie['torrentId'], file_id = file.id) }}'">
                        Play
                    </button>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    {% endif %}
    {% endfor %}
</div>


{% endblock %}